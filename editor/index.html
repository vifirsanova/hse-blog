<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Data Editor</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            margin-bottom: 10px;
        }
        
        .description {
            color: #ecf0f1;
            margin-bottom: 15px;
        }
        
        .main-content {
            display: flex;
            min-height: 600px;
        }
        
        .json-display {
            flex: 1;
            padding: 20px;
            border-right: 1px solid #eee;
            overflow-y: auto;
            max-height: 700px;
        }
        
        .json-form {
            flex: 1.5;
            padding: 20px;
            background: #f9f9f9;
            overflow-y: auto;
            max-height: 700px;
        }
        
        .json-tree {
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            max-height: 600px;
            overflow-y: auto;
            font-size: 13px;
        }
        
        .actions {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px;
            background: #ecf0f1;
            border-top: 1px solid #ddd;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-load {
            background: #3498db;
            color: white;
        }
        
        .btn-load:hover {
            background: #2980b9;
        }
        
        .btn-load-url {
            background: #9b59b6;
            color: white;
        }
        
        .btn-load-url:hover {
            background: #8e44ad;
        }
        
        .btn-save {
            background: #2ecc71;
            color: white;
        }
        
        .btn-save:hover {
            background: #27ae60;
        }
        
        .btn-reset {
            background: #e74c3c;
            color: white;
        }
        
        .btn-reset:hover {
            background: #c0392b;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }
        
        textarea.large {
            min-height: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .form-section {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .form-section h3 {
            margin-bottom: 15px;
            color: #3498db;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .form-section h4 {
            margin: 15px 0 10px;
            color: #2c3e50;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.success {
            background: #2ecc71;
        }
        
        .notification.error {
            background: #e74c3c;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .tab.active {
            background: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .content-tabs {
            display: flex;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        
        .content-tab {
            padding: 8px 15px;
            cursor: pointer;
            background: #e8f4fc;
            border: 1px solid #bde0fe;
            border-radius: 5px;
            margin-right: 5px;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .content-tab.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .circle-form {
            background: #f0f9ff;
            border-left: 4px solid #3498db;
        }
        
        .expert-item, .blog-item, .article-item, .content-item {
            background: #f9f9f9;
            border-left: 4px solid #e0e0e0;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .expert-item {
            border-left-color: #3498db;
        }
        
        .blog-item {
            border-left-color: #2ecc71;
        }
        
        .article-item {
            border-left-color: #9b59b6;
        }
        
        .content-item {
            border-left-color: #e67e22;
        }
        
        .remove-btn {
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .add-btn {
            background: #2ecc71;
            color: white;
            padding: 8px 15px;
            margin-top: 10px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>JSON Data Editor</h1>
            <p class="description">Загрузите, редактируйте и сохраняйте данные, сохраняя структуру JSON</p>
        </header>
        
        <div class="actions">
            <button class="btn-load" id="loadBtn">Загрузить JSON</button>
            <button class="btn-load-url" id="loadUrlBtn">Загрузить с URL</button>
            <button class="btn-save" id="saveBtn">Сохранить изменения</button>
            <button class="btn-reset" id="resetBtn">Сбросить</button>
        </div>
        
        <div class="main-content">
            <div class="json-display">
                <h2>Структура JSON</h2>
                <div class="json-tree" id="jsonTree">Загрузите JSON файл для просмотра структуры...</div>
            </div>
            
            <div class="json-form">
                <h2>Редактирование данных</h2>
                <p>Выберите раздел для редактирования:</p>
                
                <div class="tabs">
                    <div class="tab active" data-tab="expert">Мнения экспертов</div>
                    <div class="tab" data-tab="blog">Блог</div>
                    <div class="tab" data-tab="articles">Статьи</div>
                    <div class="tab" data-tab="content">Контент</div>
                </div>
                
                <div class="tab-content active" id="expert-tab">
                    <div class="form-section">
                        <h3>Заголовок раздела</h3>
                        <label for="expertHeading">Заголовок:</label>
                        <input type="text" id="expertHeading" placeholder="Заголовок">
                        
                        <label for="expertSubheading">Подзаголовок:</label>
                        <input type="text" id="expertSubheading" placeholder="Подзаголовок">
                    </div>
                    
                    <div class="form-section">
                        <h3>Мнения экспертов</h3>
                        <div id="expertOpinions">
                            <!-- Will be populated dynamically -->
                        </div>
                        <button class="add-btn" id="addExpertBtn">Добавить мнение эксперта</button>
                    </div>
                </div>
                
                <div class="tab-content" id="blog-tab">
                    <div class="form-section">
                        <h3>Записи блога</h3>
                        <div id="blogPosts">
                            <!-- Will be populated dynamically -->
                        </div>
                        <button class="add-btn" id="addBlogBtn">Добавить запись блога</button>
                    </div>
                </div>
                
                <div class="tab-content" id="articles-tab">
                    <div class="form-section">
                        <h3>Рекомендуемые статьи</h3>
                        <label for="marqueeText">Бегущая строка (через запятую):</label>
                        <input type="text" id="marqueeText" placeholder="Текст 1, Текст 2, Текст 3">
                        
                        <label for="articlesHeading">Заголовок:</label>
                        <input type="text" id="articlesHeading" placeholder="Заголовок">
                    </div>
                    
                    <div class="form-section">
                        <h3>Список статей</h3>
                        <div id="articlesList">
                            <!-- Will be populated dynamically -->
                        </div>
                        <button class="add-btn" id="addArticleBtn">Добавить статью</button>
                    </div>
                    
                    <div class="form-section circle-form">
                        <h3>Круглый элемент</h3>
                        <label for="circleTitle">Заголовок:</label>
                        <input type="text" id="circleTitle" placeholder="Заголовок">
                        
                        <label for="circleSubtitle">Подзаголовок:</label>
                        <input type="text" id="circleSubtitle" placeholder="Подзаголовок">
                        
                        <label for="circleFooter">Футер:</label>
                        <input type="text" id="circleFooter" placeholder="Футер">
                    </div>
                </div>
                
                <div class="tab-content" id="content-tab">
                    <div class="form-section">
                        <h3>Контент статей</h3>
                        <p>Выберите статью для редактирования:</p>
                        
                        <div class="content-tabs" id="contentTabs">
                            <!-- Will be populated dynamically -->
                        </div>
                        
                        <div id="contentEditor">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // Sample JSON data structure matching preview.json
        let jsonData = {
            "expertOpinions": {
                "heading": "Мнения экспертов",
                "subheading": "Что специалисты говорят о правовых аспектах ИИ в дизайне",
                "opinions": [
                    {
                        "name": "Анна Петрова",
                        "affiliation": "Доцент кафедры цифрового права, МГУ",
                        "quote": "Современное законодательство не успевает за развитием генеративного ИИ. Нам нужны новые правовые категории для регулирования авторства AI-контента.",
                        "image": "https://randomuser.me/api/portraits/women/45.jpg",
                        "alt": "Портрет Анны Петровой"
                    }
                ]
            },
            "blogSlider": [
                {
                    "id": "prompt-vs-art",
                    "date": "2025-07-15",
                    "title": "Промпт-инжиниринг - это <span>искусство?</span>",
                    "author": "Виктория Фирсанова",
                    "readTime": "5 мин чтения",
                    "image": "https://www.if24.ru/wp-content/uploads/2018/07/1-2.jpg",
                    "alt": "Искусственный интеллект и творчество",
                    "excerpt": "<p>Промпт-инжиниринг сегодня часто называют «новой грамотой цифровой эпохи» или даже искусством общения с машиной...</p>",
                    "content": "<h2>Промпт-инжиниринг - это искусство?</h2><p><strong>Взгляд со стороны авторского права на процесс создания промптов для генеративного ИИ и их правовой статус.</strong></p>"
                }
            ],
            "featuredArticles": {
                "marquee": [
                    "ИИ меняет представления о творчестве и авторстве",
                    "Новые правовые вызовы в эпоху генеративного ИИ",
                    "НИУ ВШЭ запускает исследовательский проект по праву ИИ"
                ],
                "heading": "Узнать больше..",
                "articles": [
                    {
                        "number": 1,
                        "title": "Промпт-инжиниринг",
                        "subtitle": "Как научиться создавать промпты эффективно и решать абсолютные любые задачи за секунды.",
                        "link": "#prompt-engineering",
                        "content": "<h2>Промпт-инжиниринг</h2><p><strong>Как научиться создавать промпты эффективно и решать абсолютные любые задачи за секунды.</strong></p>"
                    }
                ],
                "circle": {
                    "title": "LAW DESIGN + ROBOTS",
                    "subtitle": "Междисциплинарный исследовательский проект НИУ ВШЭ",
                    "footer": "Узнать больше"
                }
            }
        };

        // DOM elements
        const jsonTreeElement = document.getElementById('jsonTree');
        const loadBtn = document.getElementById('loadBtn');
        const loadUrlBtn = document.getElementById('loadUrlBtn');
        const saveBtn = document.getElementById('saveBtn');
        const resetBtn = document.getElementById('resetBtn');
        const notification = document.getElementById('notification');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const addExpertBtn = document.getElementById('addExpertBtn');
        const addBlogBtn = document.getElementById('addBlogBtn');
        const addArticleBtn = document.getElementById('addArticleBtn');

        // Initialize the app
        function init() {
            displayJsonData();
            setupEventListeners();
            renderExpertOpinions();
            renderBlogPosts();
            renderArticles();
            renderContentTabs();
        }

        // Display JSON data in the tree view
        function displayJsonData() {
            jsonTreeElement.textContent = JSON.stringify(jsonData, null, 2);
        }

        // Set up event listeners
        function setupEventListeners() {
            loadBtn.addEventListener('click', loadJsonData);
            loadUrlBtn.addEventListener('click', loadJsonFromUrl);
            saveBtn.addEventListener('click', saveJsonData);
            resetBtn.addEventListener('click', resetJsonData);
            addExpertBtn.addEventListener('click', addExpertOpinion);
            addBlogBtn.addEventListener('click', addBlogPost);
            addArticleBtn.addEventListener('click', addArticle);
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Deactivate all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    // Activate current tab
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // If content tab is selected, refresh content tabs
                    if (tabId === 'content') {
                        renderContentTabs();
                    }
                });
            });
        }

        // Load JSON data from file
        function loadJsonData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        jsonData = JSON.parse(event.target.result);
                        displayJsonData();
                        renderExpertOpinions();
                        renderBlogPosts();
                        renderArticles();
                        renderContentTabs();
                        showNotification('Данные успешно загружены!', 'success');
                    } catch (error) {
                        showNotification('Ошибка при загрузке файла: неверный формат JSON', 'error');
                        console.error(error);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Load JSON from URL
        function loadJsonFromUrl() {
            const url = 'https://raw.githubusercontent.com/vifirsanova/hse-blog/refs/heads/main/assets/preview.json';
            
            showNotification('Загрузка данных с URL...', 'success');
            
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Ошибка сети: ' + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    jsonData = data;
                    displayJsonData();
                    renderExpertOpinions();
                    renderBlogPosts();
                    renderArticles();
                    renderContentTabs();
                    showNotification('Данные успешно загружены с URL!', 'success');
                })
                .catch(error => {
                    showNotification('Ошибка при загрузке данных с URL: ' + error.message, 'error');
                    console.error(error);
                });
        }

        // Save JSON data
        function saveJsonData() {
            updateJsonFromForm();
            
            const dataStr = JSON.stringify(jsonData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'data.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Данные успешно сохранены!', 'success');
        }

        // Reset JSON data to initial state
        function resetJsonData() {
            if (confirm('Вы уверены, что хотите сбросить все изменения?')) {
                // Reset to minimal structure matching preview.json
                jsonData = {
                    "expertOpinions": {
                        "heading": "Мнения экспертов",
                        "subheading": "Что специалисты говорят о правовых аспектах ИИ в дизайне",
                        "opinions": []
                    },
                    "blogSlider": [],
                    "featuredArticles": {
                        "marquee": [],
                        "heading": "Узнать больше..",
                        "articles": [],
                        "circle": {
                            "title": "LAW DESIGN + ROBOTS",
                            "subtitle": "Междисциплинарный исследовательский проект НИУ ВШЭ",
                            "footer": "Узнать больше"
                        }
                    }
                };
                
                displayJsonData();
                renderExpertOpinions();
                renderBlogPosts();
                renderArticles();
                renderContentTabs();
                showNotification('Данные сброшены!', 'success');
            }
        }

        // Update JSON data from form inputs
        function updateJsonFromForm() {
            // Update expert opinions section
            jsonData.expertOpinions.heading = document.getElementById('expertHeading').value;
            jsonData.expertOpinions.subheading = document.getElementById('expertSubheading').value;
            
            // Update expert opinions
            const expertItems = document.querySelectorAll('.expert-item');
            jsonData.expertOpinions.opinions = [];
            
            expertItems.forEach((item, index) => {
                jsonData.expertOpinions.opinions.push({
                    name: item.querySelector(`#expertName${index}`).value,
                    affiliation: item.querySelector(`#expertAffiliation${index}`).value,
                    quote: item.querySelector(`#expertQuote${index}`).value,
                    image: item.querySelector(`#expertImage${index}`).value,
                    alt: item.querySelector(`#expertAlt${index}`).value
                });
            });
            
            // Update blog posts
            const blogItems = document.querySelectorAll('.blog-item');
            jsonData.blogSlider = [];
            
            blogItems.forEach((item, index) => {
                jsonData.blogSlider.push({
                    id: item.querySelector(`#blogId${index}`).value,
                    date: item.querySelector(`#blogDate${index}`).value,
                    title: item.querySelector(`#blogTitle${index}`).value,
                    author: item.querySelector(`#blogAuthor${index}`).value,
                    readTime: item.querySelector(`#blogReadTime${index}`).value,
                    image: item.querySelector(`#blogImage${index}`).value,
                    alt: item.querySelector(`#blogAlt${index}`).value,
                    excerpt: item.querySelector(`#blogExcerpt${index}`).value,
                    content: item.querySelector(`#blogContent${index}`) ? item.querySelector(`#blogContent${index}`).value : ""
                });
            });
            
            // Update featured articles section
            jsonData.featuredArticles.heading = document.getElementById('articlesHeading').value;
            const marqueeText = document.getElementById('marqueeText').value;
            jsonData.featuredArticles.marquee = marqueeText.split(',').map(item => item.trim());
            
            // Update articles list
            const articleItems = document.querySelectorAll('.article-item');
            jsonData.featuredArticles.articles = [];
            
            articleItems.forEach((item, index) => {
                jsonData.featuredArticles.articles.push({
                    number: parseInt(item.querySelector(`#articleNumber${index}`).value),
                    title: item.querySelector(`#articleTitle${index}`).value,
                    subtitle: item.querySelector(`#articleSubtitle${index}`).value,
                    link: item.querySelector(`#articleLink${index}`).value,
                    content: item.querySelector(`#articleContent${index}`) ? item.querySelector(`#articleContent${index}`).value : ""
                });
            });
            
            // Update circle
            jsonData.featuredArticles.circle.title = document.getElementById('circleTitle').value;
            jsonData.featuredArticles.circle.subtitle = document.getElementById('circleSubtitle').value;
            jsonData.featuredArticles.circle.footer = document.getElementById('circleFooter').value;
            
            // Update content if edited
            const contentEditor = document.getElementById('contentEditor');
            if (contentEditor.querySelector('textarea')) {
                const contentKey = contentEditor.querySelector('textarea').getAttribute('data-key');
                const contentValue = contentEditor.querySelector('textarea').value;
                
                // Check if this is a blog post or article content
                if (contentKey.startsWith('blog-')) {
                    const blogIndex = parseInt(contentKey.split('-')[1]);
                    if (jsonData.blogSlider[blogIndex]) {
                        jsonData.blogSlider[blogIndex].content = contentValue;
                    }
                } else if (contentKey.startsWith('article-')) {
                    const articleIndex = parseInt(contentKey.split('-')[1]);
                    if (jsonData.featuredArticles.articles[articleIndex]) {
                        jsonData.featuredArticles.articles[articleIndex].content = contentValue;
                    }
                }
            }
            
            displayJsonData();
        }

        // Render expert opinions in the form
        function renderExpertOpinions() {
            const expertOpinionsContainer = document.getElementById('expertOpinions');
            expertOpinionsContainer.innerHTML = '';
            
            document.getElementById('expertHeading').value = jsonData.expertOpinions.heading || '';
            document.getElementById('expertSubheading').value = jsonData.expertOpinions.subheading || '';
            
            if (jsonData.expertOpinions.opinions && jsonData.expertOpinions.opinions.length) {
                jsonData.expertOpinions.opinions.forEach((opinion, index) => {
                    const opinionElement = document.createElement('div');
                    opinionElement.className = 'expert-item';
                    opinionElement.innerHTML = `
                        <h4>Мнение эксперта #${index + 1}</h4>
                        <label for="expertName${index}">Имя:</label>
                        <input type="text" id="expertName${index}" value="${opinion.name || ''}" placeholder="Имя эксперта">
                        
                        <label for="expertAffiliation${index}">Аффилиация:</label>
                        <input type="text" id="expertAffiliation${index}" value="${opinion.affiliation || ''}" placeholder="Аффилиация">
                        
                        <label for="expertQuote${index}">Цитата:</label>
                        <textarea id="expertQuote${index}" placeholder="Цитата эксперта">${opinion.quote || ''}</textarea>
                        
                        <label for="expertImage${index}">Изображение:</label>
                        <input type="text" id="expertImage${index}" value="${opinion.image || ''}" placeholder="URL изображения">
                        
                        <label for="expertAlt${index}">Alt текст:</label>
                        <input type="text" id="expertAlt${index}" value="${opinion.alt || ''}" placeholder="Alt текст">
                        
                        <button class="remove-btn" onclick="removeExpertOpinion(${index})">Удалить</button>
                    `;
                    expertOpinionsContainer.appendChild(opinionElement);
                });
            } else {
                expertOpinionsContainer.innerHTML = '<p>Нет данных о мнениях экспертов</p>';
            }
        }

        // Add a new expert opinion
        function addExpertOpinion() {
            if (!jsonData.expertOpinions.opinions) {
                jsonData.expertOpinions.opinions = [];
            }
            
            jsonData.expertOpinions.opinions.push({
                "name": "Новый эксперт",
                "affiliation": "Аффилиация",
                "quote": "Цитата",
                "image": "https://example.com/image.jpg",
                "alt": "Alt текст"
            });
            
            renderExpertOpinions();
            displayJsonData();
        }

        // Remove expert opinion
        function removeExpertOpinion(index) {
            if (confirm('Вы уверены, что хотите удалить это мнение эксперта?')) {
                jsonData.expertOpinions.opinions.splice(index, 1);
                renderExpertOpinions();
                displayJsonData();
            }
        }

        // Render blog posts in the form
        function renderBlogPosts() {
            const blogPostsContainer = document.getElementById('blogPosts');
            blogPostsContainer.innerHTML = '';
            
            if (jsonData.blogSlider && jsonData.blogSlider.length) {
                jsonData.blogSlider.forEach((post, index) => {
                    const postElement = document.createElement('div');
                    postElement.className = 'blog-item';
                    postElement.innerHTML = `
                        <h4>Запись блога #${index + 1}</h4>
                        <label for="blogId${index}">ID:</label>
                        <input type="text" id="blogId${index}" value="${post.id || ''}" placeholder="ID записи">
                        
                        <label for="blogDate${index}">Дата:</label>
                        <input type="text" id="blogDate${index}" value="${post.date || ''}" placeholder="ГГГГ-ММ-ДД">
                        
                        <label for="blogTitle${index}">Заголовок:</label>
                        <input type="text" id="blogTitle${index}" value="${post.title || ''}" placeholder="Заголовок">
                        
                        <label for="blogAuthor${index}">Автор:</label>
                        <input type="text" id="blogAuthor${index}" value="${post.author || ''}" placeholder="Автор">
                        
                        <label for="blogReadTime${index}">Время чтения:</label>
                        <input type="text" id="blogReadTime${index}" value="${post.readTime || ''}" placeholder="Время чтения">
                        
                        <label for="blogImage${index}">Изображение:</label>
                        <input type="text" id="blogImage${index}" value="${post.image || ''}" placeholder="URL изображения">
                        
                        <label for="blogAlt${index}">Alt текст:</label>
                        <input type="text" id="blogAlt${index}" value="${post.alt || ''}" placeholder="Alt текст">
                        
                        <label for="blogExcerpt${index}">Отрывок:</label>
                        <textarea id="blogExcerpt${index}" placeholder="Отрывок статьи">${post.excerpt || ''}</textarea>
                        
                        <label for="blogContent${index}">Контент:</label>
                        <textarea id="blogContent${index}" class="large" placeholder="Полный контент статьи">${post.content || ''}</textarea>
                        
                        <button class="remove-btn" onclick="removeBlogPost(${index})">Удалить</button>
                    `;
                    blogPostsContainer.appendChild(postElement);
                });
            } else {
                blogPostsContainer.innerHTML = '<p>Нет данных о записях блога</p>';
            }
        }

        // Add a new blog post
        function addBlogPost() {
            if (!jsonData.blogSlider) {
                jsonData.blogSlider = [];
            }
            
            jsonData.blogSlider.push({
                "id": "new-post",
                "date": "2025-01-01",
                "title": "Новая запись",
                "author": "Автор",
                "readTime": "5 мин чтения",
                "image": "https://example.com/image.jpg",
                "alt": "Alt текст",
                "excerpt": "<p>Отрывок статьи</p>",
                "content": "<h2>Новая запись</h2><p>Содержимое новой записи</p>"
            });
            
            renderBlogPosts();
            displayJsonData();
        }

        // Remove blog post
        function removeBlogPost(index) {
            if (confirm('Вы уверены, что хотите удалить эту запись блога?')) {
                jsonData.blogSlider.splice(index, 1);
                renderBlogPosts();
                displayJsonData();
            }
        }

        // Render articles in the form
        function renderArticles() {
            const articlesListContainer = document.getElementById('articlesList');
            articlesListContainer.innerHTML = '';
            
            document.getElementById('articlesHeading').value = jsonData.featuredArticles.heading || '';
            document.getElementById('marqueeText').value = jsonData.featuredArticles.marquee ? jsonData.featuredArticles.marquee.join(', ') : '';
            document.getElementById('circleTitle').value = jsonData.featuredArticles.circle ? jsonData.featuredArticles.circle.title : '';
            document.getElementById('circleSubtitle').value = jsonData.featuredArticles.circle ? jsonData.featuredArticles.circle.subtitle : '';
            document.getElementById('circleFooter').value = jsonData.featuredArticles.circle ? jsonData.featuredArticles.circle.footer : '';
            
            if (jsonData.featuredArticles.articles && jsonData.featuredArticles.articles.length) {
                jsonData.featuredArticles.articles.forEach((article, index) => {
                    const articleElement = document.createElement('div');
                    articleElement.className = 'article-item';
                    articleElement.innerHTML = `
                        <h4>Статья #${index + 1}</h4>
                        <label for="articleNumber${index}">Номер:</label>
                        <input type="number" id="articleNumber${index}" value="${article.number || ''}" placeholder="Номер">
                        
                        <label for="articleTitle${index}">Заголовок:</label>
                        <input type="text" id="articleTitle${index}" value="${article.title || ''}" placeholder="Заголовок">
                        
                        <label for="articleSubtitle${index}">Подзаголовок:</label>
                        <input type="text" id="articleSubtitle${index}" value="${article.subtitle || ''}" placeholder="Подзаголовок">
                        
                        <label for="articleLink${index}">Ссылка:</label>
                        <input type="text" id="articleLink${index}" value="${article.link || ''}" placeholder="Ссылка">
                        
                        <label for="articleContent${index}">Контент:</label>
                        <textarea id="articleContent${index}" class="large" placeholder="Контент статьи">${article.content || ''}</textarea>
                        
                        <button class="remove-btn" onclick="removeArticle(${index})">Удалить</button>
                    `;
                    articlesListContainer.appendChild(articleElement);
                });
            } else {
                articlesListContainer.innerHTML = '<p>Нет данных о статьях</p>';
            }
        }

        // Add a new article
        function addArticle() {
            if (!jsonData.featuredArticles.articles) {
                jsonData.featuredArticles.articles = [];
            }
            
            jsonData.featuredArticles.articles.push({
                "number": jsonData.featuredArticles.articles.length + 1,
                "title": "Новая статья",
                "subtitle": "Подзаголовок статьи",
                "link": "#new-article",
                "content": "<h2>Новая статья</h2><p>Содержимое новой статьи</p>"
            });
            
            renderArticles();
            displayJsonData();
        }

        // Remove article
        function removeArticle(index) {
            if (confirm('Вы уверены, что хотите удалить эту статью?')) {
                jsonData.featuredArticles.articles.splice(index, 1);
                renderArticles();
                displayJsonData();
            }
        }

        // Render content tabs
        function renderContentTabs() {
            const contentTabsContainer = document.getElementById('contentTabs');
            const contentEditor = document.getElementById('contentEditor');
            contentTabsContainer.innerHTML = '';
            contentEditor.innerHTML = '<p>Выберите статью для редактирования</p>';
            
            // Add blog posts to content tabs
            if (jsonData.blogSlider && jsonData.blogSlider.length) {
                jsonData.blogSlider.forEach((post, index) => {
                    const tab = document.createElement('div');
                    tab.className = 'content-tab';
                    tab.textContent = `Блог: ${post.id}`;
                    tab.setAttribute('data-key', `blog-${index}`);
                    
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.content-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        contentEditor.innerHTML = `
                            <div class="content-item">
                                <h4>Редактирование контента: ${post.id}</h4>
                                <label for="contentValue">Содержимое:</label>
                                <textarea id="contentValue" class="large" data-key="blog-${index}" placeholder="Контент статьи">${post.content || ''}</textarea>
                            </div>
                        `;
                    });
                    
                    contentTabsContainer.appendChild(tab);
                });
            }
            
            // Add articles to content tabs
            if (jsonData.featuredArticles.articles && jsonData.featuredArticles.articles.length) {
                jsonData.featuredArticles.articles.forEach((article, index) => {
                    const tab = document.createElement('div');
                    tab.className = 'content-tab';
                    tab.textContent = `Статья: ${article.title}`;
                    tab.setAttribute('data-key', `article-${index}`);
                    
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.content-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        contentEditor.innerHTML = `
                            <div class="content-item">
                                <h4>Редактирование контента: ${article.title}</h4>
                                <label for="contentValue">Содержимое:</label>
                                <textarea id="contentValue" class="large" data-key="article-${index}" placeholder="Контент статьи">${article.content || ''}</textarea>
                            </div>
                        `;
                    });
                    
                    contentTabsContainer.appendChild(tab);
                });
            }
            
            if (!contentTabsContainer.innerHTML) {
                contentTabsContainer.innerHTML = '<p>Нет статей для редактирования</p>';
            }
        }

        // Show notification
        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.className = 'notification';
            }, 3000);
        }

        // Initialize the application
        init();
    </script>
</body>
</html>
